<?xml version="1.0" encoding="utf-8"?>

<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="medicine_tracker.MainPage">

	<Grid
		RowDefinitions="Auto,*">

		<!-- Header -->
		<Grid Padding="20,18,20,10" ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" RowSpacing="6">
			<Label
				Text="Medicine"
				FontSize="28"
				FontAttributes="Bold" />
			<Button
				Grid.Column="1"
				Text="Theme"
				Clicked="OnToggleThemeClicked"
				Padding="12,8"
				CornerRadius="12"
				BackgroundColor="{AppThemeBinding Light=#DCFCE7, Dark=#212121}"
				TextColor="{AppThemeBinding Light=#166534, Dark=#FFFFFF}" />
			<Label Text="Your upcoming reminders"
				Grid.Row="1"
				TextColor="{AppThemeBinding Light=#6E6E6E, Dark=#ACACAC}"
				FontSize="14" />
		</Grid>

		<!-- Content -->
		<Grid Grid.Row="1">
			<CollectionView
				x:Name="RemindersList"
				Margin="20,0"
				SelectionMode="None">
				<CollectionView.ItemTemplate>
					<DataTemplate>
						<SwipeView>
							<SwipeView.RightItems>
								<SwipeItems Mode="Reveal">
									<SwipeItem
										Text="Delete"
										BackgroundColor="#DC2626"
										Invoked="OnDeleteInvoked"
										CommandParameter="{Binding .}" />
								</SwipeItems>
							</SwipeView.RightItems>

							<Frame
								Padding="14"
								Margin="0,0,0,12"
								CornerRadius="16"
								HasShadow="False"
								BorderColor="{AppThemeBinding Light=#C8C8C8, Dark=#404040}"
								BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#111827}">
								<Frame.GestureRecognizers>
									<TapGestureRecognizer Tapped="OnReminderTapped" CommandParameter="{Binding .}" />
								</Frame.GestureRecognizers>
								<Frame.Triggers>
									<DataTrigger TargetType="Frame" Binding="{Binding IsTaken}" Value="True">
										<Setter Property="BorderColor" Value="#16A34A" />
										<Setter Property="BackgroundColor" Value="#DCFCE7" />
									</DataTrigger>
								</Frame.Triggers>
								<Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto" ColumnSpacing="12">
								<Frame
									Grid.RowSpan="2"
									Padding="0"
									WidthRequest="44"
									HeightRequest="44"
									CornerRadius="12"
									HasShadow="False"
									BackgroundColor="{AppThemeBinding Light=#DCFCE7, Dark=#15803D}">
									<Label
										Text="💊"
										HorizontalOptions="Center"
										VerticalOptions="Center"
										FontSize="18" />
								</Frame>

								<Label
									Grid.Column="1"
									Text="{Binding Name}"
									FontAttributes="Bold"
									FontSize="16"
									LineBreakMode="TailTruncation" />
								<Label
									Grid.Row="1"
									Grid.Column="1"
									Text="{Binding NextTrigger, StringFormat='Next: {0:dd MMM HH:mm}'}"
									TextColor="{AppThemeBinding Light=#404040, Dark=#ACACAC}"
									FontSize="13" />
							</Grid>
						</Frame>
						</SwipeView>
					</DataTemplate>
				</CollectionView.ItemTemplate>
			</CollectionView>

			<!-- Floating action button -->
			<Button
				Text="+"
				Clicked="OnAddClicked"
				WidthRequest="56"
				HeightRequest="56"
				CornerRadius="16"
				FontSize="26"
				Padding="0"
				BackgroundColor="#16A34A"
				TextColor="White"
				HorizontalOptions="End"
				VerticalOptions="End"
				Margin="0,0,20,20" />
		</Grid>
	</Grid>

</ContentPage>